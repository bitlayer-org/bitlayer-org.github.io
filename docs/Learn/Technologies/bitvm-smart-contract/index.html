<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Learn/Technologies/bitvm-smart-contract" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">BitVM-Style Smart Contract | Bitlayer</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.bitlayer.org/docs/Learn/Technologies/bitvm-smart-contract"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="BitVM-Style Smart Contract | Bitlayer"><meta data-rh="true" name="description" content="Bitcoin, by design, lacks native support for smart contracts. BitVM tackles this limitation by providing an ingenious way to emulate their functionality. This document delves into the intricacies of BitVM smart contracts, their design principles, and the security model that underpins their operation."><meta data-rh="true" property="og:description" content="Bitcoin, by design, lacks native support for smart contracts. BitVM tackles this limitation by providing an ingenious way to emulate their functionality. This document delves into the intricacies of BitVM smart contracts, their design principles, and the security model that underpins their operation."><link data-rh="true" rel="icon" href="/img/bitlayer.ico"><link data-rh="true" rel="canonical" href="https://docs.bitlayer.org/docs/Learn/Technologies/bitvm-smart-contract"><link data-rh="true" rel="alternate" href="https://docs.bitlayer.org/docs/Learn/Technologies/bitvm-smart-contract" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.bitlayer.org/docs/Learn/Technologies/bitvm-smart-contract" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Bitlayer RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Bitlayer Atom Feed">





<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3DF3TS5JQ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-R3DF3TS5JQ",{anonymize_ip:!0})</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.223fd046.css">
<script src="/assets/js/runtime~main.cc36d243.js" defer="defer"></script>
<script src="/assets/js/main.764780e5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Bitlayer_docs.svg" alt="Bitlayer Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/Bitlayer_docs.svg" alt="Bitlayer Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Bitlayer</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Learn/Introduction">Learn@Bitlayer</a><a class="navbar__item navbar__link" href="/docs/Build/GettingStarted/QuickStart">Build@Bitlayer</a><a class="navbar__item navbar__link" href="/docs/BitVMBridge/overview">BitVM Bridge</a><a href="https://blog.bitlayer.org/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://www.bitlayer.org/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Bitlayer<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/bitlayer-org" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/Learn/Introduction/">Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Introduction/">Welcome to Bitlayer Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Introduction/Roadmap">Roadmap</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/Learn/Bitlayer PoS/Overview">Bitlayer PoS (V1)</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Bitlayer PoS/Overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Bitlayer PoS/AboutGas">About Gas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Bitlayer PoS/Networks">Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Bitlayer PoS/Bridges">Bridges</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Bitlayer PoS/POR">Proof of Reserve</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Bitlayer PoS/Json-RPC">JSON-RPC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Bitlayer PoS/Contracts">Utility Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Bitlayer PoS/PegTokens">Peg Tokens</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Bitlayer PoS/BitlayerVsEth">Bitlayer VS. Ethereum</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Bitlayer PoS/AboutFinality">About finality</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/Learn/Bitlayer Rollup/overview">Bitlayer Rollup (V2)</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Bitlayer Rollup/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Bitlayer Rollup/protocol">Bitlayer Rollup Protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Bitlayer Rollup/system-design">System Design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Bitlayer Rollup/bridge">Trust-minimized BTC Bridge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Bitlayer Rollup/safety-and-liveness">Safety and Liveness</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Bitlayer Rollup/data-availability">Data Availability</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/Learn/Technologies/overview">Technologies</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Technologies/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Learn/Technologies/bitvm-smart-contract">BitVM-Style Smart Contract</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Technologies/fraud-proofs-on-bitcoin">Fraud Proofs on Bitcoin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Technologies/zero-knowledge-on-bitcoin">Zero-Knowledge Proofs on Bitcoin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Technologies/bitlayer-proof-system">Bitlayer Proof System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Technologies/finality-chain">Finality Chain</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Learn/Technologies/under-research">Our Research</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Learn/FAQs/Frequently-asked-questions">MISC</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Learn/Terms/terms-of-service">Terms</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Technologies</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">BitVM-Style Smart Contract</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>BitVM-Style Smart Contract</h1></header>
<p>Bitcoin, by design, lacks native support for smart contracts. BitVM tackles this limitation by providing an ingenious way to emulate their functionality. This document delves into the intricacies of BitVM smart contracts, their design principles, and the security model that underpins their operation.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bitvm-and-bitvm2">BitVM and BitVM2<a href="#bitvm-and-bitvm2" class="hash-link" aria-label="Direct link to BitVM and BitVM2" title="Direct link to BitVM and BitVM2">​</a></h2>
<p>Conceived by Robin Linus, BitVM represents a pioneering effort to bring the power of smart contracts to the Bitcoin ecosystem. The initial iteration, BitVM1, focused on generic computation. It required compiling a program&#x27;s verifier into low-level instructions, similar to those used in the RISC-V architecture. BitVM1 employed a two-party protocol where challenges to the program&#x27;s execution required explicit permission. To pinpoint erroneous instructions, a technique called interactive bisection was used.</p>
<p>BitVM2, a significant leap forward, introduces permissionless challenges, fostering a more open and decentralized environment. The core components of BitVM2 are primarily the fruits of labor from the BitVM alliance, a consortium of dedicated developers and researchers. Bitlayer, a committed member of this alliance, continues to contribute to the BitVM project, ensuring its long-term growth and adoption.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="demystifying-bitvm-smart-contracts">Demystifying BitVM Smart Contracts<a href="#demystifying-bitvm-smart-contracts" class="hash-link" aria-label="Direct link to Demystifying BitVM Smart Contracts" title="Direct link to Demystifying BitVM Smart Contracts">​</a></h2>
<p>The concept of BitVM smart contracts draws inspiration from Hashed Time-Locked Contracts (HTLCs), a simpler form of smart contract implemented on Bitcoin. HTLCs rely on pre-signed Bitcoin transactions to enforce contractual agreements between two parties. Before any funds are transferred, both parties pre-sign a refund transaction. This mechanism guarantees that, even in the event of a dispute or unforeseen circumstances, both parties can retrieve their funds.</p>
<p>BitVM smart contracts, while inspired by HTLCs, are significantly more sophisticated, accommodating interactions between multiple parties. Imagine a pre-defined network of Bitcoin transactions – this network, visualized as a directed graph, forms the backbone of a BitVM smart contract. This transaction graph meticulously outlines all possible execution paths for every participant involved. Once all parties have pre-signed this graph, signifying their agreement to its terms, it transforms into an immutable contract, much like a traditional smart contract deployed on a blockchain.</p>
<p>To better grasp this concept, consider the transaction graph as the &quot;source code&quot; of the smart contract. Participants, before joining the contract, meticulously review this code and its initial configurations. Only upon reaching a consensus does the contract become operational. This ensures transparency and eliminates the risk of participants unknowingly agreeing to unfavorable terms.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pre-signing-the-contract-building-a-foundation-of-trust">Pre-Signing the Contract: Building a Foundation of Trust<a href="#pre-signing-the-contract-building-a-foundation-of-trust" class="hash-link" aria-label="Direct link to Pre-Signing the Contract: Building a Foundation of Trust" title="Direct link to Pre-Signing the Contract: Building a Foundation of Trust">​</a></h2>
<p>In typical blockchain ecosystems, smart contracts are deployed directly onto the blockchain, leveraging the blockchain&#x27;s inherent security to act as a trusted source of truth. Bitcoin, however, lacks this native capability. To overcome this hurdle, BitVM introduces the concept of a pre-signing committee. This committee, composed of trusted entities, is responsible for meticulously reviewing and pre-signing the transaction graph. This process effectively emulates the on-chain deployment of traditional smart contracts.</p>
<p>The committee, through its multi-signature authority (multisig), plays a critical role in ensuring the integrity and security of the BitVM smart contract:</p>
<ul>
<li><strong>Transaction Integrity:</strong> Each transaction within the graph undergoes rigorous scrutiny to ensure the correctness of its inputs. This involves verifying the number of inputs, their corresponding values, and other relevant details. To further bolster security, the committee&#x27;s multisig is typically embedded within the unlocking script of each input. This acts as a safeguard against unauthorized modifications to the transaction graph.</li>
<li><strong>Output Validity:</strong> The committee also meticulously examines the outputs generated by each transaction. This includes verifying the number of outputs, their values, and most importantly, their unlocking scripts. These scripts, often employing covenant-style constructions, dictate how and when funds locked within an output can be spent. By carefully crafting these scripts, the committee ensures that funds flow through the contract as intended.</li>
</ul>
<p>Once the pre-signed transaction graph is made public, all participants gain access to a consistent and tamper-proof version of the smart contract. The multisig mechanism ensures that all parties adhere to the predefined rules of the contract. Participants can only send transactions that are explicitly defined within the pre-signed graph, preventing any deviation from the agreed-upon terms.</p>
<p>A crucial aspect of the BitVM security model is the deletion of private keys by the committee members after the pre-signing process. This step is essential to prevent any single entity from unilaterally modifying the contract after it has been finalized. The security of BitVM relies on the &quot;honest one&quot; assumption, meaning that at least one member of the committee is assumed to have acted honestly and deleted their private key. As long as this assumption holds true, any attempt to manipulate the smart contract is rendered infeasible.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="designing-the-transaction-graph-navigating-complexity">Designing the Transaction Graph: Navigating Complexity<a href="#designing-the-transaction-graph-navigating-complexity" class="hash-link" aria-label="Direct link to Designing the Transaction Graph: Navigating Complexity" title="Direct link to Designing the Transaction Graph: Navigating Complexity">​</a></h2>
<p>While restricting transactions to a predefined set is a significant step towards emulating smart contracts on Bitcoin, the actual design of these transaction graphs is where the true complexity lies. Use cases like verifiable computing, cross-chain bridges (like a BTC bridge), or layer-2 scaling solutions (rollups) demand intricate and carefully orchestrated transaction flows. Let&#x27;s delve into some of the challenges inherent in designing these graphs and how BitVM addresses them.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-guarding-state-transitions-ensuring-predictable-execution">1. Guarding State Transitions: Ensuring Predictable Execution<a href="#1-guarding-state-transitions-ensuring-predictable-execution" class="hash-link" aria-label="Direct link to 1. Guarding State Transitions: Ensuring Predictable Execution" title="Direct link to 1. Guarding State Transitions: Ensuring Predictable Execution">​</a></h3>
<p>A well-structured smart contract often incorporates a finite state machine (FSM) to manage its internal logic. The FSM transitions between different states based on predefined rules and the actions of its participants. Replicating this behavior on Bitcoin, a platform without native state management, requires a clever mechanism to control these state transitions. BitVM achieves this through the ingenious use of &quot;connector outputs.&quot;</p>
<p>Connector outputs are special outputs embedded within transactions that act as gatekeepers for state transitions. When a particular branch within the transaction graph consumes a connector output, it effectively invalidates other branches that might have otherwise been accessible. This ensures that the state of the contract transitions in a predictable and controlled manner, preventing any ambiguity or unintended forks in execution.</p>
<p>To further refine this control mechanism, connector outputs often incorporate timelocks. A timelock, as the name suggests, prevents an output from being spent before a predefined time or block height. By strategically placing timelocks on connector outputs, certain branches within the transaction graph can be prioritized over others.</p>
<p>Connector outputs typically hold a negligible amount of Bitcoin (often referred to as &quot;dust&quot;) as their primary purpose is control flow rather than value transfer. Their ephemeral nature makes them ideal for guiding the execution of the smart contract without unnecessarily locking up funds.</p>
<p>To illustrate this concept, consider a scenario where a participant, referred to as the &quot;defender,&quot; stakes a certain amount of Bitcoin on an assertion they make. The transaction graph defines two possible paths for the defender to withdraw their stake: a &quot;happy path&quot; and an &quot;unhappy path.&quot; Both paths share a common connector output. However, the unhappy path, equipped with an earlier timelock, allows a challenger to consume the connector output before the defender can proceed down the happy path. This mechanism forces the defender down the unhappy path, triggering a dispute resolution process to determine the validity of their initial assertion.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-handling-dynamic-elements-embracing-flexibility">2. Handling Dynamic Elements: Embracing Flexibility<a href="#2-handling-dynamic-elements-embracing-flexibility" class="hash-link" aria-label="Direct link to 2. Handling Dynamic Elements: Embracing Flexibility" title="Direct link to 2. Handling Dynamic Elements: Embracing Flexibility">​</a></h3>
<p>The static nature of pre-signed transaction graphs, while ensuring security and predictability, presents a challenge when dealing with dynamic elements inherent in certain smart contract use cases. Two common examples of such dynamic elements are:</p>
<ul>
<li><strong>Unknown Witness Data:</strong> The witness data, which includes signatures and other information required to unlock a Bitcoin transaction input, might not be known at the time of pre-signing the transaction graph.</li>
<li><strong>Unknown Addresses:</strong> The Bitcoin addresses of certain participants might be unknown during the contract creation phase. For instance, in a cross-chain bridge, the recipient of pegged-out Bitcoin might not be known beforehand. Similarly, in optimistic rollup solutions, the address of a potential challenger is not predetermined.</li>
</ul>
<p>BitVM employs different strategies to address these challenges:</p>
<ul>
<li><strong>Commit-and-Reveal for Unknown Witness Data:</strong> BitVM leverages a cryptographic technique called commit-and-reveal to handle unknown witness data. This involves creating a cryptographic commitment to the witness data and embedding this commitment within the unlocking script of a pre-signed UTXO (Unspent Transaction Output). The actual witness data is only revealed and verified when the UTXO is spent, ensuring both security and flexibility.</li>
<li><strong>Flexible SIGHASH Flags and Application-Level Solutions for Unknown Addresses:</strong> For unknown addresses, BitVM offers a more nuanced approach. In some cases, flexible <code>SIGHASH</code> flags can be employed. A <code>SIGHASH</code> flag determines which parts of a transaction are signed, allowing for certain elements to be left unspecified during pre-signing. However, this approach has limitations and might not be suitable for all scenarios. In other cases, solutions at the application layer might be necessary. For instance, the &quot;front-and-reclaim&quot; pattern used in BitVM bridges addresses the challenge of unknown peg-out users.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="commit-and-reveal-a-deep-dive">Commit and Reveal: A Deep Dive<a href="#commit-and-reveal-a-deep-dive" class="hash-link" aria-label="Direct link to Commit and Reveal: A Deep Dive" title="Direct link to Commit and Reveal: A Deep Dive">​</a></h4>
<p>Bit commitments, often implemented using Lamport signatures, provide a secure and efficient way to commit to a value without revealing it until a later time. Here&#x27;s how the commit-and-reveal process works in the context of BitVM:</p>
<ol>
<li><strong>Commit Phase:</strong> The party committing to the data (the committer) uses the public key of a Lamport signature scheme to generate a commitment for each bit of the data. These public key hashes are then embedded within the unlocking script of the committing UTXO. This step effectively &quot;locks&quot; the commitment to the data on the Bitcoin blockchain.</li>
<li><strong>Reveal Phase:</strong> To reveal the committed data, the committer discloses the corresponding private keys associated with the Lamport signature. The unlocking script, upon receiving these private keys, verifies them against the previously committed public key hashes. If the verification is successful, the committed data is considered valid and is revealed. This mechanism ensures that the committed data remains hidden until the reveal phase while guaranteeing its integrity.</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="leveraging-sighash-flags-for-flexibility">Leveraging SIGHASH Flags for Flexibility<a href="#leveraging-sighash-flags-for-flexibility" class="hash-link" aria-label="Direct link to Leveraging SIGHASH Flags for Flexibility" title="Direct link to Leveraging SIGHASH Flags for Flexibility">​</a></h4>
<p><code>SIGHASH</code> flags provide a degree of flexibility in Bitcoin transactions by allowing for the selective signing of transaction data. This means that a transaction can be partially signed, leaving certain elements, such as the recipient&#x27;s address, to be filled in later. In the context of BitVM, this flexibility can be harnessed to address the challenge of unknown addresses in specific scenarios.</p>
<p>For instance, in the BitVM2 bridge, the <code>SIGHASH</code> flag mechanism allows anyone to initiate a challenge against a potentially fraudulent withdrawal request by locking up 1 BTC. The recipient of this 1 BTC reward, in case the challenge is successful, is not predetermined during the contract creation phase. Instead, the <code>SIGHASH</code> flag mechanism allows for this address to be specified later by the challenger. This flexibility fosters a more open and decentralized challenge mechanism.</p>
<p>It&#x27;s important to note that while <code>SIGHASH</code> flags offer a powerful tool for handling dynamic elements, their applicability is limited to certain transaction structures. In more complex scenarios, application-level solutions might be required to fully address the challenges posed by unknown addresses.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-bitvm-smart-contract-a-birds-eye-view">Creating a BitVM Smart Contract: A Bird&#x27;s-Eye View<a href="#creating-a-bitvm-smart-contract-a-birds-eye-view" class="hash-link" aria-label="Direct link to Creating a BitVM Smart Contract: A Bird&#x27;s-Eye View" title="Direct link to Creating a BitVM Smart Contract: A Bird&#x27;s-Eye View">​</a></h2>
<p>The process of creating a BitVM smart contract can be summarized in three key steps:</p>
<ol>
<li><strong>Define the Transaction Graph:</strong> The first step involves meticulously designing the transaction graph that embodies the desired functionality of the smart contract. This step requires a deep understanding of Bitcoin scripting, the specific use case being addressed, and the potential edge cases that might arise.</li>
<li><strong>Pre-sign the Graph:</strong> Once the transaction graph is finalized, it is presented to the pre-signing committee. The committee members, using their multisig authority, carefully review the graph to ensure its correctness and security. Once the review is complete, the committee members jointly sign the transaction graph, effectively &quot;locking it in.&quot;</li>
<li><strong>Publish the Graph:</strong> The final step involves publishing the pre-signed transaction graph, making it accessible to all potential participants. This publication can be done through various means, such as distributing it through a decentralized storage network or simply making it available for download on a website.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bitvm-smart-contract-safety-a-spectrum-of-trust">BitVM Smart Contract Safety: A Spectrum of Trust<a href="#bitvm-smart-contract-safety-a-spectrum-of-trust" class="hash-link" aria-label="Direct link to BitVM Smart Contract Safety: A Spectrum of Trust" title="Direct link to BitVM Smart Contract Safety: A Spectrum of Trust">​</a></h2>
<p>The level of trust required in a BitVM smart contract can vary depending on its specific design and implementation. It&#x27;s helpful to think of this trust as a spectrum:</p>
<ul>
<li><strong>Trustless:</strong> At one end of the spectrum, we have trustless systems, like those found in Bitcoin and Ethereum, where the security of the system relies solely on cryptographic principles and the decentralized nature of the network. No reliance on any single party or entity is needed.</li>
<li><strong>Trusted:</strong> At the other end of the spectrum, we have systems that require a high degree of trust in a centralized entity or a small group of entities.</li>
<li><strong>Hybrid Models:</strong> Between these two extremes lie various hybrid models that offer different trade-offs between trust and security:<!-- -->
<ul>
<li><strong>Honest Majority:</strong> This model assumes that a majority of participants in the system will act honestly. Examples include MPC (Multi-Party Computation) bridges and Proof-of-Stake (PoS) blockchains.</li>
<li><strong>Honest Minority:</strong> This model relaxes the trust assumption further, requiring only a minority of participants to act honestly.</li>
<li><strong>Honest One:</strong> This model, employed in some optimistic rollup solutions, requires only one honest party for the system to function securely.</li>
</ul>
</li>
</ul>
<p>BitVM, with its flexible design, can be used to implement smart contracts across this spectrum of trust. The specific trust model employed will depend on the specific requirements of the use case being addressed. For instance, a BitVM-based cross-chain bridge might opt for an honest majority model, while an optimistic rollup solution might leverage an honest one model.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Learn/Technologies/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Overview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Learn/Technologies/fraud-proofs-on-bitcoin"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Fraud Proofs on Bitcoin</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#bitvm-and-bitvm2" class="table-of-contents__link toc-highlight">BitVM and BitVM2</a></li><li><a href="#demystifying-bitvm-smart-contracts" class="table-of-contents__link toc-highlight">Demystifying BitVM Smart Contracts</a></li><li><a href="#pre-signing-the-contract-building-a-foundation-of-trust" class="table-of-contents__link toc-highlight">Pre-Signing the Contract: Building a Foundation of Trust</a></li><li><a href="#designing-the-transaction-graph-navigating-complexity" class="table-of-contents__link toc-highlight">Designing the Transaction Graph: Navigating Complexity</a><ul><li><a href="#1-guarding-state-transitions-ensuring-predictable-execution" class="table-of-contents__link toc-highlight">1. Guarding State Transitions: Ensuring Predictable Execution</a></li><li><a href="#2-handling-dynamic-elements-embracing-flexibility" class="table-of-contents__link toc-highlight">2. Handling Dynamic Elements: Embracing Flexibility</a></li></ul></li><li><a href="#creating-a-bitvm-smart-contract-a-birds-eye-view" class="table-of-contents__link toc-highlight">Creating a BitVM Smart Contract: A Bird&#39;s-Eye View</a></li><li><a href="#bitvm-smart-contract-safety-a-spectrum-of-trust" class="table-of-contents__link toc-highlight">BitVM Smart Contract Safety: A Spectrum of Trust</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/Learn/Introduction">Learn</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Build/GettingStarted/QuickStart">Build</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://t.me/bitlayerofficial" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.com/invite/GGSjNyD8nj" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/BitLayerLabs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://medium.com/@Bitlayer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/bitlayer-org" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Bitlayer</div></div></div></footer></div>
</body>
</html>